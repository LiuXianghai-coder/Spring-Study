<?xml version="1.0" encoding="UTF-8" ?>
<bean>
    <if test="_parameter != null">
        SELECT *,
        ${@tk.mybatis.mapper.util.OGNL@rowNumberSql(_parameter)} AS mapper_rank_x
        FROM (
    </if>
    SELECT
    <if test="distinct">distinct</if>
    <choose>
        <when test="@tk.mybatis.mapper.util.OGNL@hasSelectColumns(_parameter)">
            <foreach collection="_parameter.selectColumns" item="selectColumn" separator=",">${selectColumn}</foreach>
        </when>
        <otherwise>
            created_user,created_time,updated_user,updated_time,id,user_name,first_name,last_name,phone,gender,user_age
        </otherwise>
    </choose>
    FROM user_info
    <if test="_parameter != null">
        <where>
            ${@tk.mybatis.mapper.util.OGNL@andNotLogicDelete(_parameter)}
            <trim prefix="(" prefixOverrides="and |or " suffix=")">
                <foreach collection="oredCriteria" item="criteria">
                    <if test="criteria.valid">
                        ${@tk.mybatis.mapper.util.OGNL@andOr(criteria)}
                        <trim prefix="(" prefixOverrides="and |or " suffix=")">
                            <foreach collection="criteria.criteria" item="criterion">
                                <choose>
                                    <when test="criterion.noValue">
                                        ${@tk.mybatis.mapper.util.OGNL@andOr(criterion)} ${criterion.condition}
                                    </when>
                                    <when test="criterion.singleValue">
                                        ${@tk.mybatis.mapper.util.OGNL@andOr(criterion)} ${criterion.condition}
                                        #{criterion.value}
                                    </when>
                                    <when test="criterion.betweenValue">
                                        ${@tk.mybatis.mapper.util.OGNL@andOr(criterion)} ${criterion.condition}
                                        #{criterion.value} and #{criterion.secondValue}
                                    </when>
                                    <when test="criterion.listValue">
                                        ${@tk.mybatis.mapper.util.OGNL@andOr(criterion)} ${criterion.condition}
                                        <foreach close=")" collection="criterion.value" item="listItem" open="("
                                                 separator=",">
                                            #{listItem}
                                        </foreach>
                                    </when>
                                </choose>
                            </foreach>
                        </trim>
                    </if>
                </foreach>
            </trim>
        </where>
    </if>
    <if test="orderByClause != null">order by ${orderByClause}</if>
    <if test="@tk.mybatis.mapper.util.OGNL@hasForUpdate(_parameter)">FOR UPDATE</if>
    <if test="_parameter != null">
        ) AS tmp
        WHERE mapper_rank_x=${@tk.mybatis.mapper.util.OGNL@rowNumberCondition(_parameter)}
        <if test="orderByClause != null">order by ${orderByClause}</if>
    </if>

</bean>